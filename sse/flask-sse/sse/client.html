<html>
<head>
  <title>Flask SSE Demo</title>
</head>

<body>
  <ul id="list">
    <!-- new content appears here -->
  </ul>
</body>

<script>
  const eventSource = new EventSource('http://localhost:5000/sse');
  const listElement = document.getElementById('list');

  eventSource.onmessage = function (currentEvent) {
    if (currentEvent.data.length > 0) {
      const listElement = document.getElementById('list');
      const newElement = document.createElement('li');
      newElement.innerText = currentEvent.data;

      console.log(JSON.parse(currentEvent.data))

      listElement.appendChild(newElement)
    }
  };
</script>

</html>